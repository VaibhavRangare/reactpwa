(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t){},156:function(e,t,a){},161:function(e,t,a){},264:function(e,t,a){},267:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(34),l=a.n(o),c=(a(94),a(5)),i=a(6),r=a(8),m=a(7),u=a(9),d=(a(51),function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null)}}]),t}(n.Component)),h=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var p=a(271),g=a(272),E=a(3),f={bucket_name:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BUCKET_SLUG||"996304b0-28d1-11e9-9e3f-b139f5a50259",bucket_slug:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BUCKET_SLUG||"996304b0-28d1-11e9-9e3f-b139f5a50259",bucket_id:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BUCKET_ID||"",read_key:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BUCKET_READ_KEY||"",write_key:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_BUCKET_WRITE_KEY||"",url:"https://api.cosmicjs.com/v1/"},v=a(15),y=a.n(v),w={addnews:function(e,t,a,n){return y.a.post(f.url+f.bucket_slug+"/add-object/",{title:e,slug:e,content:a,type_slug:"news",write_key:f.write_key,metafields:[{key:"description",type:"text",value:t},{key:"date",type:"text",value:n}]})},getNews:function(){return y.a.get(f.url+f.bucket_slug+"/object-type/news",{params:{read_key:f.read_key}})},submitComment:function(e,t,a){return y.a.post(f.url+f.bucket_slug+"/add-object/",{title:e,slug:e,content:a,type_slug:"comments",write_key:f.write_key,metafields:[{key:"comment",type:"text",value:t}]})},allComments:function(){return y.a.get(f.url+f.bucket_slug+"/object-type/comments",{params:{read_key:f.read_key}})}},C=a(35),N=a.n(C),k=a(269),j=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).state={newsArray:[]},a.loginCall=a.loginCall.bind(Object(E.a)(Object(E.a)(a))),a.dashboardCall=a.dashboardCall.bind(Object(E.a)(Object(E.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"getNews",value:function(){var e=this;navigator.onLine?w.getNews().then(function(t){t.data.objects&&(e.setState({newsArray:t.data.objects}),localStorage.setItem("news",JSON.stringify(t.data.objects)))}):this.setState({newsArray:JSON.parse(localStorage.getItem("news"))})}},{key:"loginCall",value:function(){this.props.history.push("/login")}},{key:"dashboardCall",value:function(){this.props.history.push("/dashboard")}},{key:"render",value:function(){return s.a.createElement("div",{className:"blog"},s.a.createElement("div",null,this.data?s.a.createElement("button",{className:"btn btn-success button-right",onClick:this.dashboardCall},"Dashboard"):s.a.createElement("button",{className:"btn btn-success button-right",onClick:this.loginCall},"Admin Login")),this.state.newsArray.map(function(e){return s.a.createElement("ul",null,s.a.createElement("h1",{className:"blog-title",key:e.title},e.title),s.a.createElement("div",null,s.a.createElement("p",{key:e.metadata.date},"Published: ",e.metadata.date," "),s.a.createElement("div",{key:e.metadata.description},N()(e.metadata.description))),s.a.createElement("div",null," ",s.a.createElement(k.a,{to:"/singlenews/".concat(e._id),className:"btn btn-success",key:e._id},"Complete News..")),s.a.createElement("hr",null))}))}},{key:"componentDidMount",value:function(){this.data=localStorage.getItem("currentUser"),this.getNews()}}]),t}(n.Component),_={login:function(e){return y.a.get(f.url+f.bucket_slug+"/object-type/admins/search",{params:{metafield_key:"email",metafield_value:e,limit:1,read_key:f.read_key}})}},O=(a(156),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){var t=a.state;t[e.target.name]=e.target.value,a.setState(t)},a.onSubmit=function(e){e.preventDefault(),a.setState({isLoading:"Please wait.."}),_.login(a.state.email).then(function(e){console.log(e.data.objects[0].metadata.email),"No objects returned."===e.data.message?(a.setState({message:"Wrong credentials, try again!!"}),a.setState({isLoading:""}),a.timeout()):(a.setState({message:""}),a.setState({isLoading:""}),localStorage.setItem("currentUser",e.data.objects[0].metadata.email),a.props.history.push("/dashboard"))})},a.state={email:"",password:"",message:"",isLoading:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"timeout",value:function(){setTimeout(function(){this.setState({message:""})}.bind(this),5e3)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(k.a,{to:"/"},s.a.createElement("button",{type:"submit",className:"btn btn-success"},"Back"))," "),s.a.createElement("div",{className:"wrapper fadeInDown"},s.a.createElement("div",{id:"formContent"},s.a.createElement("h2",{className:"active"},s.a.createElement("b",null," Admin Login ")),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("input",{type:"email",name:"email",value:this.state.email,onChange:this.onChange,placeholder:"Enter email"}),s.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.onChange,placeholder:"Enter password"}),s.a.createElement("input",{type:"submit",className:"fadeIn fourth",value:"Login"}),s.a.createElement("p",null,this.state.isLoading),s.a.createElement("p",{className:"loginalert"},this.state.message)))))}},{key:"componentDidMount",value:function(){localStorage.getItem("currentUser")&&this.props.history.push("/dashboard")}}]),t}(n.Component)),S=(a(159),a(161),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).state={},a.logout=a.logout.bind(Object(E.a)(Object(E.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"logout",value:function(){localStorage.removeItem("currentUser"),this.props.history.push("/")}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement("ul",{id:"ul_top_hypers"},s.a.createElement("li",null," ",s.a.createElement(k.a,{to:"/"},s.a.createElement("button",{type:"submit",className:"btn btn-success"},"Home"))),s.a.createElement("li",null," ",s.a.createElement(k.a,{to:"/addnews"},s.a.createElement("button",{type:"submit",className:"btn btn-success"},"Add News"))),s.a.createElement("li",null,"  ",s.a.createElement("button",{type:"submit",className:"btn btn-success",onClick:this.logout},"Logout")))),s.a.createElement("div",{className:"text-center"},s.a.createElement("h1",null,"Hey Admin, Welcome to Dashboard!")))}},{key:"componentDidMount",value:function(){localStorage.getItem("currentUser")||this.props.history.push("/")}}]),t}(n.Component)),D=a(50),P=a.n(D),A=(a(262),a(264),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){var t=a.state;t[e.target.name]=e.target.value,a.setState(t)},a.onSubmit=function(e){e.preventDefault(),a.setState({message:"Please wait..."}),w.addnews(a.state.title,a.state.description,a.state.newsbody,a.state.date).then(function(e){console.log(e),a.setState({message:"News published successfully"}),a.timeout()})},a.state={title:"",description:"",newsbody:"",message:"",date:""},a.handleChange=a.handleChange.bind(Object(E.a)(Object(E.a)(a))),a.handleChange2=a.handleChange2.bind(Object(E.a)(Object(E.a)(a))),a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({newsbody:e})}},{key:"handleChange2",value:function(e){this.setState({description:e})}},{key:"todayDate",value:function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();this.setState({date:t})}},{key:"timeout",value:function(){setTimeout(function(){this.setState({message:""})}.bind(this),5e3)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(k.a,{to:"/dashboard"},s.a.createElement("button",{type:"submit",className:"btn btn-success"},"Back"))," "),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"offset-md-3 col-md-6 form-back mb-5"},s.a.createElement("div",null,s.a.createElement("h3",null,"Publish News: ")),s.a.createElement("br",null),s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"text",className:"form-control",name:"title",value:this.state.title,onChange:this.onChange,placeholder:"Enter title for news",id:"news-title"})),s.a.createElement("div",{className:"form-group "},s.a.createElement(P.a,{name:"description",value:this.state.description,onChange:this.handleChange2,placeholder:"Enter description (Min 200 words)"})),s.a.createElement("div",{className:"form-group "},s.a.createElement(P.a,{name:"newsbody",value:this.state.newsbody,className:"ql-container",onChange:this.handleChange,placeholder:"Enter body..."})),s.a.createElement("div",{className:"form-group margin-up"},s.a.createElement("button",{type:"submit",className:"btn btn-success margin-up"},"Publish")),s.a.createElement("p",null,this.state.message)))))}},{key:"componentDidMount",value:function(){this.todayDate()}}]),t}(n.Component)),U=a(270),L=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(r.a)(this,Object(m.a)(t).call(this,e))).onChange=function(e){var t=a.state;t[e.target.name]=e.target.value,a.setState(t)},a.submitComment=function(e){e.preventDefault(),a.setState({message:"Posting comment..."}),w.submitComment(a.state.name,a.state.comment,a.state.newsId).then(function(e){console.log(e),a.setState({message:""}),a.allComments()})},a.state={newsId:"",allNews:"",singleNewsData:[],name:"",comment:"",message:"",allComments:[]},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"singleNews",value:function(){var e=this;w.getNews().then(function(t){console.log(t.data.objects);var a=t.data.objects.filter(function(t){return t._id===e.state.newsId});e.setState({singleNewsData:a[0]}),console.log(e.state.singleNewsData.metadata.date)})}},{key:"allComments",value:function(){var e=this;w.allComments().then(function(t){console.log(t.data.objects);var a=t.data.objects;if(a){var n=a.filter(function(t){return t.content===e.state.newsId});e.setState({allComments:n})}})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(k.a,{to:"/"},s.a.createElement("button",{type:"submit",className:"btn btn-success"},"Back"))," "),s.a.createElement("h1",{className:"blog-title"},this.state.singleNewsData.title),s.a.createElement("div",null,N()(this.state.singleNewsData.content)),s.a.createElement("hr",null),s.a.createElement("div",null,s.a.createElement("h4",null,"Comments:"),this.state.allComments.map(function(e){return s.a.createElement("div",null,s.a.createElement("p",null,s.a.createElement("b",null,e.title)),s.a.createElement("p",null,e.metadata.comment),s.a.createElement("hr",null))})),s.a.createElement("div",{className:"margin-top"},s.a.createElement(U.a,{onSubmit:this.submitComment},s.a.createElement("label",null,"Name"),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"textarea",className:"form-control",name:"name",value:this.state.name,onChange:this.onChange,placeholder:"Enter name",id:"commentName"})),s.a.createElement("label",null,"Comment"),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{type:"textarea",className:"form-control",name:"comment",value:this.state.comment,onChange:this.onChange,placeholder:"Enter comment",id:"commentBody"})),s.a.createElement("input",{type:"submit",className:"",value:"Comment",id:"comment-button"}),s.a.createElement("span",null,this.state.message))))}},{key:"componentDidMount",value:function(){console.log(this.props.match.params.id),this.setState({newsId:this.props.match.params.id}),this.singleNews(),this.allComments()}}]),t}(n.Component);l.a.render(s.a.createElement(d,null),document.getElementById("root")),l.a.render(s.a.createElement(p.a,null,s.a.createElement("div",{className:"container"},s.a.createElement("div",null,s.a.createElement("div",{className:"jumbotron center"},"React PWA in Cosmic JS")),s.a.createElement(g.a,{exact:!0,path:"/",component:j}),s.a.createElement(g.a,{path:"/dashboard",component:S}),s.a.createElement(g.a,{path:"/login",component:O}),s.a.createElement(g.a,{path:"/addnews",component:A}),s.a.createElement(g.a,{path:"/singlenews/:id",component:L}),s.a.createElement("div",null,s.a.createElement("p",{className:"footer-center"},"Proudly Powered by ",s.a.createElement("a",{href:"https://cosmicjs.com/"},"Cosmic JS"))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");h?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):b(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):b(t,e)})}}()},51:function(e,t,a){},89:function(e,t,a){e.exports=a(267)},94:function(e,t,a){}},[[89,2,1]]]);
//# sourceMappingURL=main.4b7559d8.chunk.js.map